!function(){"use strict";function e(){for(var e=document,t=["iPhone","iPad","MQQBrowser","Android","MicroMessenger","Trident"],i=navigator.userAgent,n=e.getElementsByTagName("html")[0],a=0;a<t.length;a++){var s=new RegExp(t[a]);i.match(s)&&n.classList.add("ua-"+t[a])}-1!==i.indexOf("Safari")&&-1===i.indexOf("Chrome")&&n.classList.add("ua-Safari"),"ontouchstart"in window||n.classList.add("ua-Pointer"),e.getElementsByTagName("body")[0].addEventListener("touchstart",(function(){}),{passive:!0}),e.getElementsByTagName("main")[0].addEventListener("touchstart",(function(){}),{passive:!0})}function t(){function e(e,i,a,s){var o=this,c=e.createScriptProcessor(1024);return c.clipping=!1,c.lastClip=0,c.volume=0,c.clipLevel=i||.98,c.averaging=a||.95,c.clipLag=s||750,c.onaudioprocess=t,c.connect(e.destination),c.checkClipping=function(){return!!o.clipping&&(o.lastClip+o.clipLag<n.performance.now()&&(o.clipping=!1),o.clipping)},c.shutdown=function(){o.disconnect(),o.onaudioprocess=null},c}function t(e){for(var t=e.inputBuffer.getChannelData(0),i=t.length,a=0,s,o=0;o<i;o++)s=t[o],Math.abs(s)>=this.clipLevel&&(this.clipping=!0,this.lastClip=n.performance.now()),a+=s*s;var c=Math.sqrt(a/i);this.volume=Math.max(c,this.volume*this.averaging)}var i=document,n=window,a,s,o,c=i.querySelector(".instruction"),r=i.querySelector(".text"),l=r.style;r.addEventListener("click",(function(){r.classList.contains("is-clicked")||(r.classList.add("is-clicked"),c.classList.add("is-clicked"),n.AudioContext=n.AudioContext||n.webkitAudioContext,a=new AudioContext,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){s=a.createMediaStreamSource(t),o=e(a),s.connect(o),d()})))}));var d=function e(){var t=50,i=5,n=5;l.fontVariationSettings='"wdth"'+t*(1+5*o.volume),l.transform="translateY(-50%) scale("+(1+5*o.volume)+")",l.webkitTransform="translateY(-50%) scale("+(1+5*o.volume)+")",requestAnimationFrame(e)}}
/*!
	 * @license
	 * Chris Wilson | MIT license | https://github.com/cwilso/volume-meter
	 */var i=document,n;switch(e(),i.querySelector("body").classList[0]){case"index":t();break}}();