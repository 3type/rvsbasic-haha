!function(){"use strict";function e(){for(var e=document,t=["iPhone","iPad","MQQBrowser","Android","MicroMessenger","Trident"],n=navigator.userAgent,i=e.getElementsByTagName("html")[0],a=0;a<t.length;a++){var r=new RegExp(t[a]);n.match(r)&&i.classList.add("ua-"+t[a])}-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome")&&i.classList.add("ua-Safari"),"ontouchstart"in window||i.classList.add("ua-Pointer"),e.getElementsByTagName("body")[0].addEventListener("touchstart",(function(){}),{passive:!0}),e.getElementsByTagName("main")[0].addEventListener("touchstart",(function(){}),{passive:!0})}function t(){function e(e,n,a,r){var s=this,o=e.createScriptProcessor(1024);return o.clipping=!1,o.lastClip=0,o.volume=0,o.clipLevel=n||.98,o.averaging=a||.95,o.clipLag=r||750,o.onaudioprocess=t,o.connect(e.destination),o.checkClipping=function(){return!!s.clipping&&(s.lastClip+s.clipLag<i.performance.now()&&(s.clipping=!1),s.clipping)},o.shutdown=function(){s.disconnect(),s.onaudioprocess=null},o}function t(e){for(var t=e.inputBuffer.getChannelData(0),n=t.length,a=0,r,s=0;s<n;s++)r=t[s],Math.abs(r)>=this.clipLevel&&(this.clipping=!0,this.lastClip=i.performance.now()),a+=r*r;var o=Math.sqrt(a/n);this.volume=Math.max(o,this.volume*this.averaging)}var n=document,i=window,a,r,s,o=n.querySelector(".instruction"),c=n.querySelector(".text"),l=c.style;c.addEventListener("click",(function(){c.classList.contains("is-clicked")||(c.classList.add("is-clicked"),o.classList.add("is-clicked"),i.AudioContext=i.AudioContext||i.webkitAudioContext,a=new AudioContext,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){r=a.createMediaStreamSource(t),s=e(a),r.connect(s),d()})))}));var d=function e(){var t=50,n=5,i=2;l.fontVariationSettings='"wdth"'+t*(1+5*s.volume),l.transform="translateY(-50%) scale("+(1+2*s.volume)+")",l.webkitTransform="translateY(-50%) scale("+(1+2*s.volume)+")",requestAnimationFrame(e)};autosize(c),c.value="哈哈哈哈哈哈哈哈";var u=c.value.length,v=function e(t){u=t.target.selectionStart};c.addEventListener("mousedown",v),c.addEventListener("mouseup",v),c.addEventListener("keydown",v),c.addEventListener("keyup",v);var g=n.querySelector(".glyf-list"),m=function e(t){var n=c.value;c.value=n.slice(0,u)+t+n.slice(u),u+=t.length};g.addEventListener("click",(function(e){for(var t=e.target;!t.matches(".glyf-item")&&!t.matches(".glyf-list")&&t;)t=t.parentElement,m(t.getAttribute("data-char"))}));var f=5e3,p=function e(){var t=randomColor({luminosity:"light",format:"rgb"});n.documentElement.style.setProperty("--color-ink",t)};p(),setInterval(p,f)}
/*!
	 * @license
	 * Chris Wilson | MIT license | https://github.com/cwilso/volume-meter
	 */var n=document,i;switch(e(),n.querySelector("body").classList[0]){case"index":t();break}}();