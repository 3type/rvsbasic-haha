!function(){"use strict";function e(){for(var e=document,t=["iPhone","iPad","MQQBrowser","Android","MicroMessenger","Trident"],n=navigator.userAgent,i=e.getElementsByTagName("html")[0],a=0;a<t.length;a++){var o=new RegExp(t[a]);n.match(o)&&i.classList.add("ua-"+t[a])}-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome")&&i.classList.add("ua-Safari"),"ontouchstart"in window||i.classList.add("ua-Pointer"),e.getElementsByTagName("body")[0].addEventListener("touchstart",(function(){}),{passive:!0}),e.getElementsByTagName("main")[0].addEventListener("touchstart",(function(){}),{passive:!0})}function t(){function e(e,n,a,o){var r=this,s=e.createScriptProcessor(1024);return s.clipping=!1,s.lastClip=0,s.volume=0,s.clipLevel=n||.98,s.averaging=a||.95,s.clipLag=o||750,s.onaudioprocess=t,s.connect(e.destination),s.checkClipping=function(){return!!r.clipping&&(r.lastClip+r.clipLag<i.performance.now()&&(r.clipping=!1),r.clipping)},s.shutdown=function(){r.disconnect(),r.onaudioprocess=null},s}function t(e){for(var t=e.inputBuffer.getChannelData(0),n=t.length,a=0,o,r=0;r<n;r++)o=t[r],Math.abs(o)>=this.clipLevel&&(this.clipping=!0,this.lastClip=i.performance.now()),a+=o*o;var s=Math.sqrt(a/n);this.volume=Math.max(s,this.volume*this.averaging)}var n=document,i=window,a,o,r,s=n.querySelector(".instruction"),c=n.querySelector(".text"),l=c.style;c.addEventListener("click",(function(){c.classList.contains("is-clicked")||(c.classList.add("is-clicked"),s.classList.add("is-clicked"),i.AudioContext=i.AudioContext||i.webkitAudioContext,a=new AudioContext,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){o=a.createMediaStreamSource(t),r=e(a,.98,.98,750),o.connect(r),u()})))}));var u=function e(){var t=50,n=6,i=3;l.fontVariationSettings='"wdth"'+t*(1+6*r.volume),l.transform="translateY(-50%) scale("+(1+3*r.volume)+")",l.webkitTransform="translateY(-50%) scale("+(1+3*r.volume)+")",requestAnimationFrame(e)};autosize(c),c.value="哈哈哈哈哈哈哈哈";var d=c.value.length,v=function e(t){d=t.target.selectionStart};c.addEventListener("mousedown",v),c.addEventListener("mouseup",v),c.addEventListener("keydown",v),c.addEventListener("keyup",v);for(var g=n.querySelectorAll(".glyf-item"),m=function e(t){var n=c.value;c.value=n.slice(0,d)+t+n.slice(d),d+=t.length},f=function e(t){g[t].addEventListener("click",(function(){m(g[t].getAttribute("data-char"))}))},p=0;p<g.length;p++)f(p);var h=5e3,L=function e(){var t=randomColor({luminosity:"light",format:"rgb"});n.documentElement.style.setProperty("--color-ink",t)};L(),setInterval(L,h)}
/*!
	 * @license
	 * Chris Wilson | MIT license | https://github.com/cwilso/volume-meter
	 */var n=document,i;switch(e(),n.querySelector("body").classList[0]){case"index":t();break}}();