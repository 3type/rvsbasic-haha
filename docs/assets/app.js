!function(){"use strict";function e(){for(var e=document,t=["iPhone","iPad","MQQBrowser","Android","MicroMessenger","Trident"],n=navigator.userAgent,i=e.getElementsByTagName("html")[0],a=0;a<t.length;a++){var o=new RegExp(t[a]);n.match(o)&&i.classList.add("ua-"+t[a])}-1!==n.indexOf("Safari")&&-1===n.indexOf("Chrome")&&i.classList.add("ua-Safari"),"ontouchstart"in window||i.classList.add("ua-Pointer"),e.getElementsByTagName("body")[0].addEventListener("touchstart",(function(){}),{passive:!0}),e.getElementsByTagName("main")[0].addEventListener("touchstart",(function(){}),{passive:!0})}function t(){function e(e,n,a,o){var r=this,s=e.createScriptProcessor(1024);return s.clipping=!1,s.lastClip=0,s.volume=0,s.clipLevel=n||.98,s.averaging=a||.95,s.clipLag=o||750,s.onaudioprocess=t,s.connect(e.destination),s.checkClipping=function(){return!!r.clipping&&(r.lastClip+r.clipLag<i.performance.now()&&(r.clipping=!1),r.clipping)},s.shutdown=function(){r.disconnect(),r.onaudioprocess=null},s}function t(e){for(var t=e.inputBuffer.getChannelData(0),n=t.length,a=0,o,r=0;r<n;r++)o=t[r],Math.abs(o)>=this.clipLevel&&(this.clipping=!0,this.lastClip=i.performance.now()),a+=o*o;var s=Math.sqrt(a/n);this.volume=Math.max(s,this.volume*this.averaging)}var n=document,i=window,a,o,r,s=n.querySelector(".instruction"),c=n.querySelector(".text"),d=c.style;c.addEventListener("click",(function(){c.classList.contains("is-clicked")||(c.classList.add("is-clicked"),s.classList.add("is-clicked"),i.AudioContext=i.AudioContext||i.webkitAudioContext,a=new AudioContext,navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!0}).then((function(t){o=a.createMediaStreamSource(t),r=e(a),o.connect(r),l()})))}));var l=function e(){var t=50,n=5,i=2;d.fontVariationSettings='"wdth"'+t*(1+5*r.volume),d.transform="translateY(-50%) scale("+(1+2*r.volume)+")",d.webkitTransform="translateY(-50%) scale("+(1+2*r.volume)+")",requestAnimationFrame(e)},u=c.innerHTML.length,g=function e(){var t=0,n=0,i=c;if(window.getSelection)(t=window.getSelection()).rangeCount&&(n=t.getRangeAt(0)).commonAncestorContainer.parentNode===i&&(u=n.endOffset);else if(document.selection&&document.selection.createRange&&(n=document.selection.createRange()).parentElement()===i){var a=document.createElement("span");i.insertBefore(a,i.firstChild);var o=n.duplicate();o.moveToElementText(a),o.setEndPoint("EndToEnd",n),u=o.text.length}};c.addEventListener("mousedown",g),c.addEventListener("mouseup",g),c.addEventListener("keydown",g),c.addEventListener("keyup",g);var m=n.querySelector(".glyf-list"),v=function e(t){var n=c.innerHTML;c.innerHTML=n.slice(0,u)+t+n.slice(u),u+=t.length};m.addEventListener("click",(function(e){for(var t=e.target;!t.matches(".glyf-item")&&!t.matches(".glyf-list")&&t;)t=t.parentElement,v(t.getAttribute("data-char"))}))}
/*!
	 * @license
	 * Chris Wilson | MIT license | https://github.com/cwilso/volume-meter
	 */var n=document,i;switch(e(),n.querySelector("body").classList[0]){case"index":t();break}}();